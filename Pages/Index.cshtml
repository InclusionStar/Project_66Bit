@page
@model IndexModel
@{
    ViewData["Title"] = "Home page";
    Layout = "_Home";
}
<link href="~/css/style.css" rel="stylesheet" />
<link href="~/css/colors/blue.css" id="theme" rel="stylesheet" />
<link href="~/css/index.css" rel="stylesheet" />
<link href="~/css/Module.css" rel="stylesheet" />
<div class="page-wrapper">
    <header class="page-header">
        <div class="main-logo">
            <a asp-page="Index" class="dop btn btn-info btn-rounded waves-effect waves-light m-b-40">SW</a>
        </div>
        <div class="header-profile">
            <a href="prifle" class="profile"></a>
        </div>
    </header>
    <main>
        <div class="projCard-wrapper">
            <div class="fixProject">
                @{
                    if (Model.Projects.Count == 0)
                    {
                        <h1 class="emptyMessage">У Вас пока нет проектов. Добавьте новый проект</h1>
                    }
                    foreach (var proj in Model.Projects)
                    {
                        <div class="card1 card">
                            <div class="nameProject"><a asp-page="Mod" asp-route-id="@proj.Id" class="size">@proj.Name</a></div>
                            <div class="type"><p>Тип : @proj.Type</p></div>
                            <div class="type"><p>Заказчик : ОПГ Газпром</p></div>
                            <div class="type"><p>Стоимость часа : @proj.Cost</p></div>
                            <div class="type"><p>@proj.StartDate.ToShortDateString() - @proj.EndDate.ToShortDateString()</p></div>
                            <div class="type2"><p>Статус : @Model.GetProjectStatus(proj.Status)</p></div>
                            <div class="form btn btn-info btn-rounded waves-effect waves-light m-b-40"><a href="">Сформировать проект на базе текущего</a></div>
                            <div class="line"></div>
                        </div>
                    }
                }
            </div>
        </div>
        <div class="moduleCard-wrapper">
            <div class="fixModule">
                @{
                    int i = 0;
                    foreach (var module in Model.Modules)
                    {
                        i++;
                        <div class="card card1 cardModule" id="card-@i">
                            <div class="nameModule"><p class="size">@module.Name (@module.Project.Name)</p></div>
                            <div class="timeModule"><p>Количество часов : @module.Hours</p></div>
                            <div class="line lineModule" id="line-@i"></div>
                            <button class="tel-@i module formMOdule btn btn-info btn-rounded waves-effect waves-light m-b-40">Проекты по схожему модулю</button>
                            <div class="card-@i contentMOdule" id="tel-@i">
                                @foreach (var proj in Model.Projects)
                                {
                                    if (proj.Id == module.ProjectId)
                                    {
                                        <div class="card insidecard">
                                            <div class="nameModule"><p class="">@module.Name (@proj.Name)</p></div>
                                        </div>
                                    }
                                }
                            </div>
                        </div>
                    }
                }
            </div>
        </div>
        <div class="main-search">
            <form>
                <input type="text" placeholder="Искать здесь...">
                <button type="submit"></button>
            </form>
        </div>
        <div class="addProject fix">
            <div class="add">
                <button class="form12 btn btn-info btn-rounded waves-effect waves-light m-b-40" id="myBtn">+ Добавить проект</button>
            </div>
            <div id="myModal" class="batton card">
                <form method="POST">
                    <button class="close btn waves-effect waves-light m-b-40"></button>
                    <div class="baton"><input type="text" class="login" placeholder="Название проекта" asp-for="NewProject.Name" required /></div>
                    <div class="baton"><input type="text" class="login" placeholder="Тип проекта" asp-for="NewProject.Type" required /></div>
                    <div class="baton"><input type="text" class="login" placeholder="Стоимость часа" asp-for="NewProject.Cost" required /></div>
                    <div class="baton">
                        <p class="status">Выберите статус проекта :</p>
                        <select name="theme" asp-for="NewProject.Status">
                            <option value="0">Планирование</option>
                            <option value="1">Пред. продажа</option>
                            <option value="2">В разработке</option>
                            <option value="3">Завершен</option>
                        </select>
                    </div>
                    <p class="status">Выберите дату проекта :</p>
                    <div class="baton date"><input type="date" name="calendar1" asp-for="NewProject.StartDate"> - <input type="date" name="calendar2" asp-for="NewProject.EndDate"></div>
                    <div class="Customer"><p class="pos">Заказчик</p></div>
                    <div class=" CustomerCard">
                        <div class="baton"><input type="text" class="login" placeholder="ФИО" asp-for="NewCustomer.Name" required /></div>
                        <div class="baton"><input type="text" class="login" placeholder="email" asp-for="NewCustomer.Email" required /></div>
                        <div class="baton"><input type="text" class="login" placeholder="Телефон" asp-for="NewCustomer.PhoneNumber" required /></div>
                        <div class="baton"><input type="submit" class="login" placeholder="Добавить существующего заказчика"/></div>
                        <div class="customersField">
                            @{
                                int j = 0;
                                foreach (var customer in Model.Customers)
                                {
                                    j++;
                                    <div class="card card1 cardModule" id="card-@j">
                                         <div class="nameCustomer"><p class="size">@customer.Name</p></div>
                                         <div class="customerEmail"><p>@customer.Email</p></div>
                                         <div class="customerPhoneNum"><p>@customer.PhoneNumber</p></div>
                                    </div>
                                }
                            }
                        </div>
                    </div>
                    <input type="submit" class="form22 btn btn-info btn-rounded waves-effect waves-light m-b-40" value="Создать проект">
                </form>
            </div>
        </div>
    </main>
</div>
<script src="~/js/index.js"></script>
<script src="~/js/Module.js"></script>
<style>
    .fixed {
    }

    .form22 {
        color: white;
    }

    .cardFix {
        position: relative;
        left: -150px;
    }
</style>
